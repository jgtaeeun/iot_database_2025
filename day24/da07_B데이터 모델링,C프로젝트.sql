INSERT INTO Doctors VALUES (980312, '소아과', '이태정', 'M' , '010-333-1340', 'ltj@hanbh.com','과장') ,
							(000601, '내과', '안성기', 'M' , '010-222-0987', 'ask@hanbh.com','과장'),
                            (001208, '외과', '김민종', 'M' , '010-333-8743', 'kmj@hanbh.com','과장'),
                            (020403, '피부과', '이태서', 'M' , '010-777-3764', 'lts@hanbh.com','과장'),
                            (050900, '소아과', '김연아', 'F' , '010-555-3746', 'kya@hanbh.com','전문의'),
                            (050101, '내과', '차태현', 'M' , '010-222-7643', 'cth@hanbh.com','전문의'),
                            (062019, '소아과', '전지현', 'F' , '010-999-1265', 'jh@hanbh.com','전문의'),
                            (070576, '피부과', '홍길동', 'M' , '010-333-7263', 'hgd@hanbh.com','전문의'),
                            (080543, '방사선과', '유재석', 'M' , '010-222-1263', 'yjs@hanbh.com','과장'),
                            (091001, '외과', '김병만', 'M' , '010-555-3542', 'kbm@hanbh.com','전문의');
                            
INSERT INTO Nurses VALUES (050302, '소아과', '김은영', 'F' , '010-555-8751', 'key@hanbh.com','수간호사') ,
							(050021, '내과', '윤성애', 'F' , '010-333-8745', 'ysa@hanbh.com','수간호사'),
                            (040089, '피부과', '신지원', 'M' , '010-666-7646', 'sjw@hanbh.com','주임'),
                            (070605, '방사선과', '유정화', 'F' , '010-333-4588', 'yjh@hanbh.com','주임'),
                            (070804, '내과', '라하나', 'F' , '010-222-1340', 'nhn@hanbh.com','주임'),
                            (071018, '소아과', '김화경', 'F' , '010-888-4116', 'khk@hanbh.com','간호사'),
                            (100356, '소아과', '이선용', 'M' , '010-777-1234', 'lsy@hanbh.com','간호사'),
                            (104145, '외과', '김현', 'M' , '010-999-8520', 'kh@hanbh.com','간호사'),
                            (120309, '피부과', '박성완', 'M' , '010-777-4996', 'psw@hanbh.com','간호사'),
                            (130211, '외과', '이서연', 'F' , '010-222-3214', 'lsy2@hanbh.com','간호사');
                            
INSERT INTO Patients (pat_id, nur_id,doc_id,pat_name,pat_gen,pat_jumin,pat_addr, pat_phone,pat_email,pat_job) VALUES (2345, 050302,980312,'안성건','M','232345','서울','010-555-7845','ask@ab.com','회사원'), 
							(3545, 040089,020403,'김성룡','M','543545','서울','010-333-7812','ksr@bb.com','자영업'),
							(3424, 070605,080543,'이종진','M','433424','부산','010-888-4859','ljj@ab.com','회사원'),
							(7675, 100356,050900,'최광석','M','677675','당진','010-222-4847','cks@cc.com','회사원'),
							(4533, 070804,000601,'정한경','M','744533','강릉','010-777-9630','jhk@ab.com','교수'),
							(5546, 120309,070576,'유원현','M','765546','대구','010-777-0214','ywh@cc.com','자영업'),
                            (4543, 070804,050101,'최재정','M','454543','부산','010-555-4187','cjj@bb.com','회사원'),
							(9768, 130211,091001,'이진희','F','19768','서울','010-888-3675','ljh@ab.com','교수'),
                            (4234, 130211,091001,'오나미','F','234234','속초','010-999-6541','onm@cc.com','학생'),
							(7643, 071018,062019,'송성묵','M','987643','서울','010-222-5874','ssm@bb.com','학생');
                            
                            
                            
INSERT INTO Treatments (treat_id,pat_id,doc_id,treat_contents, treat_date) VALUES 	(130516023,2345,980312,'감기,몸살','2023-05-16'), 
																					(130628100,3545,020403,'피부 트러블 치료','2023-06-28'), 
																					(131205056,3424,080543,'목 디스크로 MRI 촬영','2023-12-05'), 
																					(131218024,7675,050900,'중이염','2023-12-18'),
																					(131224012,4533,000601,'장염','2023-12-24'),
																					(140103001,5546,070576,'여드름 치료','2024-01-03'),
																					(140109026,4543,050101,'위염','2024-01-09'), 
																					(140226102,9768,091001,'화상 치료','2024-02-26'), 
																					(140303003,4234,091001,'교통사고 외상 치료','2024-03-03'), 
																					(140308087,7643,062019,'장염','2024-03-08');
                                                                                    
INSERT INTO Charts  VALUES 	('p_130516023',130516023,980312,2345,050302,'감기 주사 및 약 처방'), 
							('d_130628100',130628100,020403,3545,040089,'피부 감염 방지 주사'), 
							('r_131205056',131205056,080543,3424,070605,'주사 처방'), 
							('p_131218024',131218024,050900,7675,100356,'귓속 청소 및 약 처방'), 
							('i_131224012',131224012,000601,4533,070804,'장염 입원 치료'), 
							('d_140103001',140103001,070576,5546,120309,'여드름 치료약 처방'), 
							('i_140109026',140109026,050101,4543,070804,'위내시경'), 
							('s_140226102',140226102,091001,9768,130211,'화상 크림약 처방'), 
							('s_140303003',140303003,091001,4234,130211,'입원 치료'), 
							('p_140308087',140308087,062019,7643,071018,'장염 입원 치료');
                            
                            
-- 문제 1 
/* 홍길동 의사가 맡고 있던 담당진료과목이 피부과에서 소아과로 변경되어 내일부터 진료시작할 예정 */
SELECT *
FROM Doctors;

SET SQL_SAFE_UPDATES = 0;
UPDATE Doctors SET major_treat = '소아과' WHERE doc_name  LIKE '홍길동';
SET SQL_SAFE_UPDATES = 1;

-- 문제 2
/*라하나 간호사는 대학원 진학으로 오늘까지만 근무하고 퇴사하게 되었다. 이정보에 대한 테이블 정보를 변경하시오*/

SELECT nur_id
FROM Nurses
WHERE nur_name LIKE '라하나';

-- 라하나 간호사와 연결된 자식 테이블
SELECT *
FROM Patients
WHERE nur_id = (
	SELECT nur_id
	FROM Nurses
	WHERE nur_name LIKE '라하나'
);

SELECT *
FROM Charts
WHERE nur_id = (
	SELECT nur_id
	FROM Nurses
	WHERE nur_name LIKE '라하나'
);

SET SQL_SAFE_UPDATES = 0;
DELETE FROM Nurses WHERE nur_name LIKE '라하나';   -- FOREIGN키를 가진 자식 테이블이 있어 삭제 에러남 
SET SQL_SAFE_UPDATES = 1;

-- 문제 3
-- 담당과목이 '소아과'인 의사 
SELECT *
FROM Doctors
WHERE major_treat LIKE '소아과';

-- 문제 4
-- 홍길동 의사에게 진료받은 환자에 대한 모든 정보를 출력하시오
SELECT doc_id
 FROM Doctors
 WHERE doc_name LIKE '홍길동';
 
 SELECT *
  FROM Patients
  WHERE doc_id = (
			SELECT doc_id
			 FROM Doctors
			 WHERE doc_name LIKE '홍길동'
  );
  
  SELECT p.*
  FROM Doctors d, Patients p
  WHERE d.doc_id = p.doc_id
   AND d.doc_name = '홍길동';
   
   -- 문제 5
   -- 진료날짜가 2023년 12월인 환자에 대한 모든 정보를 오름차순 정렬(날짜 오름차순)
   SELECT p.*
   FROM Patients p, Treatments t
   WHERE p.pat_id = t.pat_id
	AND t.treat_date BETWEEN '2023-12-01' AND '2023-12-31'
    ORDER BY t.treat_date;
   
   -- 문제 6
   -- 간호사 이름이 '김'으로 시작하는 모든 간호사 정보
   SELECT *
   FROM Nurses
   WHERE nur_name LIKE '김%';